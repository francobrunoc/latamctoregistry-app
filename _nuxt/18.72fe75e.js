(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{466:function(t,e,n){"use strict";n.r(e),n.d(e,"amplify_amazon_button",(function(){return y})),n.d(e,"amplify_auth0_button",(function(){return _})),n.d(e,"amplify_facebook_button",(function(){return A})),n.d(e,"amplify_google_button",(function(){return j})),n.d(e,"amplify_oauth_button",(function(){return N}));var o=n(23),r=n(89),c=n(496),h=n(530),f=n(198),d=n(531),l=n(529),w=n(532),m=function(t,e,n,o){return new(n||(n=Promise))((function(r,c){function h(t){try{d(o.next(t))}catch(t){c(t)}}function f(t){try{d(o.throw(t))}catch(t){c(t)}}function d(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,f)}d((o=o.apply(t,e||[])).next())}))},I=function(t,body){var e,n,o,g,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){r=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(6===c[0]&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=body.call(t,r)}catch(t){c=[6,t],n=0}finally{e=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}},v=new r.a("amplify-amazon-button"),y=function(){function t(t){var e=this;Object(o.k)(this,t),this.handleAuthStateChange=w.d,this.federatedSignIn=function(t){var n=t.access_token,o=t.expires_in;if(n){if(!f.a||"function"!=typeof f.a.federatedSignIn||"function"!=typeof f.a.currentAuthenticatedUser)throw new Error(l.d);var r=1e3*o+(new Date).getTime();window.amazon.Login.retrieveProfile((function(t){return m(e,void 0,void 0,(function(){var e,o;return I(this,(function(c){switch(c.label){case 0:return t.success?(e={name:t.profile.Name,email:t.profile.PrimaryEmail},[4,f.a.federatedSignIn("amazon",{token:n,expires_at:r},e)]):[2,v.debug("Get user Info failed")];case 1:return c.sent(),[4,f.a.currentAuthenticatedUser()];case 2:return o=c.sent(),this.handleAuthStateChange(h.a.SignedIn,o),[2]}}))}))}))}}}return t.prototype.signInWithAmazon=function(t){var e=this;t.preventDefault(),window.amazon.Login.setClientId(this.clientId),window.amazon.Login.authorize({scope:"profile"},(function(t){if(t.error)return v.debug("Failed to login with amazon: "+t.error);try{window.localStorage.setItem(l.s,JSON.stringify({provider:"amazon"}))}catch(t){v.debug("Failed to cache auth source into localStorage",t)}e.federatedSignIn(t)}))},t.prototype.render=function(){var t=this;return Object(o.i)("amplify-sign-in-button",{onClick:function(e){return t.signInWithAmazon(e)},provider:"amazon"},Object(o.i)("script",{src:"https://assets.loginwithamazon.com/sdk/na/login1.js"}),c.a.get(d.a.SIGN_IN_WITH_AMAZON))},t}(),S=new r.a("amplify-auth0-button"),_=function(){function t(t){var e=this;Object(o.k)(this,t),this.handleAuthStateChange=w.d,this.handleLoad=function(){var t=f.a.configure().oauth,n=void 0===t?{}:t,o=e.config,r=void 0===o?n.auth0:o;r?(S.debug("auth0 configuration",r),e._auth0||(e._auth0=new window.auth0.WebAuth(r)),e._auth0.parseHash((function(t,n){if(t)S.debug("Failed to parse the url for Auth0",t);else if(n){var o={provider:"auth0",opts:{returnTo:r.returnTo,clientID:r.clientID,federated:r.federated}};try{localStorage.setItem(l.s,JSON.stringify(o))}catch(t){S.debug("Failed to cache auth source into localStorage",t)}e._auth0.client.userInfo(n.accessToken,(function(t,o){return m(e,void 0,void 0,(function(){var e,c,d;return I(this,(function(l){switch(l.label){case 0:return e=void 0,c=void 0,t?S.debug("Failed to get the user info",t):(e=o.name,c=o.email),[4,f.a.federatedSignIn(r.domain,{token:n.idToken,expires_at:1e3*n.expiresIn+(new Date).getTime()},{name:e,email:c})];case 1:return l.sent(),[4,f.a.currentAuthenticatedUser()];case 2:return d=l.sent(),this.handleAuthStateChange(h.a.SignedIn,d),[2]}}))}))}))}else S.debug("Auth0 found no authResult in hash")}))):S.debug("Auth0 is not configured")}}return t.prototype.signInWithAuth0=function(t){if(t.preventDefault(),!this._auth0)throw new Error("the auth0 client is not configured");this._auth0.authorize()},t.prototype.render=function(){var t=this;return Object(o.i)("amplify-sign-in-button",{onClick:function(e){return t.signInWithAuth0(e)},provider:"auth0"},Object(o.i)("script",{onLoad:this.handleLoad,src:"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js"}),c.a.get(d.a.SIGN_IN_WITH_AUTH0))},t}(),k=new r.a("amplify-facebook-button"),A=function(){function t(t){var e=this;Object(o.k)(this,t),this.handleAuthStateChange=w.d,this.federatedSignIn=function(t){var n=t.accessToken,o=t.expiresIn;if(n){if(!f.a||"function"!=typeof f.a.federatedSignIn||"function"!=typeof f.a.currentAuthenticatedUser)throw new Error(l.d);var r=1e3*o+(new Date).getTime();window.FB.api("/me",{fields:"name,email"},(function(t){return m(e,void 0,void 0,(function(){var e,o;return I(this,(function(c){switch(c.label){case 0:return e={name:t.name,email:t.email},[4,f.a.federatedSignIn("facebook",{token:n,expires_at:r},e)];case 1:return c.sent(),[4,f.a.currentAuthenticatedUser()];case 2:return o=c.sent(),this.handleAuthStateChange(h.a.SignedIn,o),[2]}}))}))}))}},this.getLoginStatus=function(){window.FB.getLoginStatus((function(t){try{window.localStorage.setItem(l.s,JSON.stringify({provider:"facebook"}))}catch(t){k.debug("Failed to cache auth source into localStorage",t)}if("connected"===t.status)return e.federatedSignIn(t.authResponse);e.login()}))},this.login=function(){window.FB.login((function(t){t&&t.authResponse&&e.federatedSignIn(t.authResponse)}),{scope:"public_profile,email"})}}return t.prototype.signInWithFacebook=function(t){t.preventDefault(),window.FB.init({appId:this.appId,cookie:!0,xfbml:!1,version:"v5.0"}),this.getLoginStatus()},t.prototype.render=function(){var t=this;return Object(o.i)("amplify-sign-in-button",{onClick:function(e){return t.signInWithFacebook(e)},provider:"facebook"},Object(o.i)("script",{async:!0,defer:!0,src:"https://connect.facebook.net/en_US/sdk.js"}),c.a.get(d.a.SIGN_IN_WITH_FACEBOOK))},t}(),O=new r.a("amplify-google-button"),j=function(){function t(t){var e=this;Object(o.k)(this,t),this.handleAuthStateChange=w.d,this.handleError=function(t){console.error(t)},this.handleLoad=function(){window.gapi.load("auth2")},this.handleUser=function(t){return m(e,void 0,void 0,(function(){var e,n,o,r,c;return I(this,(function(d){switch(d.label){case 0:if(!f.a||"function"!=typeof f.a.federatedSignIn||"function"!=typeof f.a.currentAuthenticatedUser)throw new Error(l.d);try{window.localStorage.setItem(l.s,JSON.stringify({provider:"google"}))}catch(t){O.debug("Failed to cache auth source into localStorage",t)}return e=t.getAuthResponse(),n=e.id_token,o=e.expires_at,r=t.getBasicProfile(),[4,f.a.federatedSignIn("google",{token:n,expires_at:o},{email:r.getEmail(),name:r.getName(),picture:r.getImageUrl()})];case 1:return d.sent(),[4,f.a.currentAuthenticatedUser()];case 2:c=d.sent();try{this.handleAuthStateChange(h.a.SignedIn,c)}catch(t){this.handleError(t)}return[2]}}))}))}}return t.prototype.getAuthInstance=function(){return window.gapi&&window.gapi.auth2?window.gapi.auth2.getAuthInstance()||window.gapi.auth2.init({client_id:this.clientId,cookiepolicy:"single_host_origin",scope:"profile email openid"}):null},t.prototype.signInWithGoogle=function(t){t.preventDefault(),this.getAuthInstance().signIn().then(this.handleUser).catch(this.handleError)},t.prototype.render=function(){var t=this;return Object(o.i)("amplify-sign-in-button",{onClick:function(e){return t.signInWithGoogle(e)},provider:"google"},Object(o.i)("script",{onLoad:this.handleLoad,src:"https://apis.google.com/js/api:client.js"}),c.a.get(d.a.SIGN_IN_WITH_GOOGLE))},t}(),N=function(){function t(t){Object(o.k)(this,t),this.config={}}return t.prototype.signInWithOAuth=function(t){t.preventDefault(),f.a.federatedSignIn()},t.prototype.render=function(){var t=this;return Object(o.i)("amplify-sign-in-button",{onClick:function(e){return t.signInWithOAuth(e)},provider:"oauth"},this.config.label||c.a.get(d.a.SIGN_IN_WITH_AWS))},t}()}}]);